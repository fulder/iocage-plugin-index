freebsd_instance:
  cpu: 1
  memory: "1"

install_template: &INSTALL_PLUGIN
  install_script: .cirrus/install_script.sh

calibre-web_task:
  <<: *INSTALL_PLUGIN
  only_if: "changesInclude('calibre-web.json', '.cirrus/install_script.sh')"
  matrix:
    - freebsd_instance:
        image_family: freebsd-12-2
  env:
    PLUGIN_FILE: "calibre-web.json"

drupal8_task:
  <<: *INSTALL_PLUGIN
  only_if: "changesInclude('drupal8.json', '.cirrus/install_script.sh')"
  matrix:
    - freebsd_instance:
        image_family: freebsd-12-2
  env:
    PLUGIN_FILE: "drupal8.json"

emby_task:
  <<: *INSTALL_PLUGIN
  only_if: "changesInclude('emby.json', '.cirrus/install_script.sh')"
  matrix:
    - freebsd_instance:
        image_family: freebsd-12-1
  env:
    PLUGIN_FILE: "emby.json"

emby-server-stable_task:
  <<: *INSTALL_PLUGIN
  only_if: "changesInclude('emby-server-stable.json', '.cirrus/install_script.sh')"
  matrix:
    - freebsd_instance:
        image_family: freebsd-12-2
  env:
    PLUGIN_FILE: "emby-server-stable.json"

esphome_task:
  <<: *INSTALL_PLUGIN
  only_if: "changesInclude('esphome.json', '.cirrus/install_script.sh')"
  matrix:
    - freebsd_instance:
        image_family: freebsd-12-2
  env:
    PLUGIN_FILE: "esphome.json"

homeassistant_task:
  <<: *INSTALL_PLUGIN
  only_if: "changesInclude('homeassistant.json', '.cirrus/install_script.sh')"
  matrix:
    - freebsd_instance:
        image_family: freebsd-12-2
  env:
    PLUGIN_FILE: "homeassistant.json"

homebridge_task:
  <<: *INSTALL_PLUGIN
  only_if: "changesInclude('homebridge.json', '.cirrus/install_script.sh')"
  matrix:
    - freebsd_instance:
        image_family: freebsd-12-1
  env:
    PLUGIN_FILE: "homebridge.json"

hoobs_task:
  <<: *INSTALL_PLUGIN
  only_if: "changesInclude('hoobs.json', '.cirrus/install_script.sh')"
  matrix:
    - freebsd_instance:
        image_family: freebsd-12-1
  env:
    PLUGIN_FILE: "hoobs.json"


jackett_task:
  <<: *INSTALL_PLUGIN
  only_if: "changesInclude('jackett.json', '.cirrus/install_script.sh')"
  matrix:
    - freebsd_instance:
        image_family: freebsd-12-1
  env:
    PLUGIN_FILE: "jackett.json"

jenkins_task:
  <<: *INSTALL_PLUGIN
  only_if: "changesInclude('jenkins.json', '.cirrus/install_script.sh')"
  matrix:
    - freebsd_instance:
        image_family: freebsd-12-1
  env:
    PLUGIN_FILE: "jenkins.json"

jenkins-lts_task:
  <<: *INSTALL_PLUGIN
  only_if: "changesInclude('jenkins-lts.json', '.cirrus/install_script.sh')"
  matrix:
    - freebsd_instance:
        image_family: freebsd-12-1
  env:
    PLUGIN_FILE: "jenkins-lts.json"

lidarr_task:
  <<: *INSTALL_PLUGIN
  only_if: "changesInclude('lidarr.json', '.cirrus/install_script.sh')"
  matrix:
    - freebsd_instance:
        image_family: freebsd-12-1
  env:
    PLUGIN_FILE: "lidarr.json"

motioneye_task:
  <<: *INSTALL_PLUGIN
  only_if: "changesInclude('motioneye.json', '.cirrus/install_script.sh')"
  matrix:
    - freebsd_instance:
        image_family: freebsd-12-2
  env:
    PLUGIN_FILE: "motioneye.json"

#openvpn_task:
#  <<: *INSTALL_PLUGIN
#  only_if: "changesInclude('openvpn.json', '.cirrus/install_script.sh')"
#  matrix:
#    - freebsd_instance:
#        image_family: freebsd-12-2
#  env:
#    PLUGIN_FILE: "openvpn.json"

privatebin_task:
  <<: *INSTALL_PLUGIN
  only_if: "changesInclude('privatebin.json', '.cirrus/install_script.sh')"
  matrix:
    - freebsd_instance:
        image_family: freebsd-12-1
  env:
    PLUGIN_FILE: "privatebin.json"

unificontroller_task:
  <<: *INSTALL_PLUGIN
  only_if: "changesInclude('unificontroller.json', '.cirrus/install_script.sh')"
  matrix:
    - freebsd_instance:
        image_family: freebsd-11-3
  env:
    PLUGIN_FILE: "unificontroller.json"

unificontroller-lts_task:
  <<: *INSTALL_PLUGIN
  only_if: "changesInclude('unificontroller-lts.json', '.cirrus/install_script.sh')"
  matrix:
    - freebsd_instance:
        image_family: freebsd-11-3
  env:
    PLUGIN_FILE: "unificontroller-lts.json"

vault_task:
  <<: *INSTALL_PLUGIN
  only_if: "changesInclude('vault.json', '.cirrus/install_script.sh')"
  matrix:
    - freebsd_instance:
        image_family: freebsd-12-1
  env:
    PLUGIN_FILE: "vault.json"

zwavejs2mqtt_task:
  <<: *INSTALL_PLUGIN
  only_if: "changesInclude('zwavejs2mqtt.json', '.cirrus/install_script.sh')"
  matrix:
    - freebsd_instance:
        image_family: freebsd-12-2
  env:
    PLUGIN_FILE: "zwavejs2mqtt.json"


freebsd_instance:
  cpu: 4
  memory: "4"

install_template: &INSTALL_PLUGIN
  install_script: .cirrus/install_script.sh

calibre-web_task:
  <<: *INSTALL_PLUGIN
  only_if: "changesInclude('calibre-web.json', '.cirrus/install_script.sh')"
  matrix:
    - freebsd_instance:
        image_family: freebsd-12-2
  env:
    PLUGIN_FILE: "calibre-web.json"

homebridge_task:
  <<: *INSTALL_PLUGIN
  only_if: "changesInclude('homebridge.json', '.cirrus/install_script.sh')"
  matrix:
    - freebsd_instance:
        image_family: freebsd-12-2
  env:
    PLUGIN_FILE: "homebridge.json"

hoobs_task:
  <<: *INSTALL_PLUGIN
  only_if: "changesInclude('hoobs.json', '.cirrus/install_script.sh')"
  matrix:
    - freebsd_instance:
        image_family: freebsd-12-2
  env:
    PLUGIN_FILE: "hoobs.json"


#jackett_task:
#  <<: *INSTALL_PLUGIN
#  only_if: "changesInclude('jackett.json', '.cirrus/install_script.sh')"
#  matrix:
#    - freebsd_instance:
#        image_family: freebsd-12-1
#  env:
#    PLUGIN_FILE: "jackett.json"
#    FOLLOW_REDIRECTS: false


